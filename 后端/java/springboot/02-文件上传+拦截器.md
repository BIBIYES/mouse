# 访问文件

所有的资源文件默认都是存放在 `src/main/resources/static/` 下载你可以直接通过

`127.0.0.1/1.jpg` 来访问当前静态资源文件

![[Pasted image 20240319202037.png]]

## 1 自定义静态资源目录

在 `全局配置文件` 中写道

```js
#添加一个虚拟路径  
spring.mvc.static-path-pattern=/images/**
#自定义一个路径
spring.web.resources.static-locations=classpath:/static
```

> 添加虚拟路径也就是在 `url` 中图片并没有在 `images` 文件夹中但是需要在图片名字前添加一个 `images` 
> 自定义路径不是**虚拟路径**也就是真真在的文件夹

# 文件上传

Sping boot 工程嵌入的 tomcat 限制了请求的文件大小，每个文件的配置最大为 `1mb `, 单次请求的文件的总数不能大于 10mb

1. 我们需要添加一个配置

```java
# 文件最大上传为10mb
spring.servlet.multipart.max-file-size=10MB  
# 请求体最大为10MB
spring.servlet.multipart.max-request-size=10MB
```

2. 书写上传文件代码

```java
package org.mouse.charpper01.controller;  
  
import org.springframework.web.bind.annotation.PostMapping;  
import org.springframework.web.bind.annotation.RestController;  
import org.springframework.web.multipart.MultipartFile;  
  
import javax.servlet.http.HttpServletRequest;  
import java.io.File;  
import java.io.IOException;  
  
@RestController  
public class FileUploadController {  
    @PostMapping("/upLoad")  
    public String upLoad(String nickname, MultipartFile photo, HttpServletRequest request){  
        System.out.println(nickname);  
        System.out.println(photo.getOriginalFilename());  
        System.out.println(photo.getContentType());  
        String path = request.getServletContext().getRealPath("/upload");  
        System.out.println(path);  
        saveFile(photo, path);  
        return "上传成功";  
    }  
  
    public void saveFile(MultipartFile photo, String path){  
        File dir = new File(path);  
        if (!dir.exists()){  
            dir.mkdirs(); // 创建多级目录  
        }  
        File file = new File(dir, photo.getOriginalFilename()); // 使用File类的构造方法创建文件对象  
        try {  
            photo.transferTo(file);  
        } catch (IOException e) {  
            throw new RuntimeException(e);  
        }  
    }  
}
```

>具体我也不清楚你需要访问到

3. 访问上传的文件你需要**重新配置**

```java
spring.web.resources.static-locations=/upload/
```

> 这与 [[#自定义静态资源目录|自定义静态目录冲突]]
> 你可以点击按钮来查看原视频[视频](https://www.bilibili.com/video/BV1nV4y1s7ZN?t=523.7&p=4)

## 1 拦截器

用户发送过来的请求都会到达拦截器，配置拦截器的表达式来判断是否去执行请求 ![[Pasted image 20240325085534.png]]
